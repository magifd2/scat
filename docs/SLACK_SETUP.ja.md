# scat Slack セットアップガイド

`scat` をSlackプロバイダーで使用するには、Slackアプリを作成し、適切な権限（スコープ）を持つボットトークンを取得する必要があります。このガイドでは、そのプロセスを順を追って説明します。

---

### ステップ1: Slackアプリの作成

1.  [Slack APIサイト](https://api.slack.com/apps) にアクセスし、アカウントにログインします。

2.  **「Create New App」** ボタンをクリックします。

3.  表示されるダイアログで、**「From scratch」** を選択します。

4.  アプリ名（例: `My Scat Bot`）を入力し、インストールしたいワークスペースを選択して、**「Create App」** をクリックします。

**注:** 以下に記載されているアプリアイコンと説明文の提案は任意です。ご自身の好みに合わせて自由に設定してください。このドキュメントは、設定に迷った際の参考としてご活用ください。

### Display Information

Slackアプリの「Display Information」セクションには、以下の説明文を設定してください。

#### Short description

SlackをCLIから操作。投稿、ログエクスポート、チャンネル管理などを効率化します。

#### Long description

Scatは、Slackとの連携を強化するための強力なコマンドラインインターフェース（CLI）ツールです。これにより、ユーザーはターミナルから直接、メッセージの投稿、チャンネルリストの取得、ログのエクスポート、ファイルのアップロード、プロファイルの管理といった多様なSlack操作を効率的に実行できます。開発者やパワーユーザー向けに設計されており、スクリプトによる自動化や日常業務の簡素化に貢献します。

---

### アプリのアイコン

Slackアプリケーションのアイコンとして、`docs/` ディレクトリにある `scat_icon.png` をご使用いただけます。

---

### ステップ2: 権限（スコープ）の追加

アプリの管理画面に移動したら、`scat` が必要とする権限を追加する必要があります。

1.  左側のサイドバーから **「OAuth & Permissions」** を選択します。

2.  **「Scopes」** セクションまでスクロールします。

3.  **「Bot Token Scopes」** の下にある **「Add an OAuth Scope」** ボタンをクリックし、以下の各スコープを追加します。

    **コアスコープ（投稿用）:**
    *   `chat:write`: パブリックチャンネルにメッセージを投稿するために必要です。
    *   `files:write`: ファイルをアップロードするために必要です。
    *   `channels:join`: 投稿前にボットが自動的にパブリックチャンネルに参加するために必要です。

    **DM・ユーザースコープ（DM送信とユーザー情報用）:**
    *   `im:write`: ユーザーとのDMチャンネルを開くために必要です。
    *   `users.read`: メンション名（例: `@someuser`）でのDM送信や、ログエクスポート時のユーザー名解決に必要です。

    **オプションスコープ（追加機能用）:**
    *   `channels:manage`: `channel create` コマンドに必要です。
    *   `channels:read`: `channel list` コマンドに必要です。
    *   `groups:read`: プライベートチャンネルを表示するための `channel list` コマンドに必要です。
    *   `chat:write.customize`: `--username` または `--iconemoji` フラグを使用してボットの名前やアイコンを上書きしたい場合に必要です。

    **エクスポートスコープ（`export log` コマンド用）:**
    *   `channels:history`: パブリックチャンネルからメッセージ履歴を読み取るために必要です。
    *   `groups:history`: プライベートチャンネルからメッセージ履歴を読み取るために必要です。
    *   `files:read`: 添付ファイルをダウンロードするために必要です。

### ステップ3: ワークスペースへのアプリのインストール

スコープを追加したら、トークンを生成するためにアプリをワークスペースにインストールできます。

1.  「OAuth & Permissions」ページの上部までスクロールします。

2.  **「Install to Workspace」** ボタンをクリックします。

3.  次の画面で、**「Allow」** をクリックしてアプリを承認します。

### ステップ4: ボットトークンの取得

インストール後、ページが更新され、**「Bot User OAuth Token」** が表示されます。

*   `xoxb-` で始まるこのトークンをコピーします。これが `scat` を設定するために使用するトークンです。

### ステップ5: scatの設定

コピーしたトークンを使用して、`scat` プロファイルを作成または更新します。

```bash
# "my-slack" という名前の新しいプロファイルを作成
scat profile add my-slack-workspace --provider slack --channel "#general"

# 上記コマンドの実行後、トークンの入力を求められます。
# ステップ4でコピーした "xoxb-..." トークンを貼り付けてEnterを押します。
Enter Token (will not be displayed): [ここにトークンを貼り付け]
```

これでセットアップは完了です。

### ステップ6: チャンネルへのボットの招待

ボットがチャンネル（特にプライベートチャンネル）に投稿できるようにするには、そのチャンネルのメンバーである必要があります。

*   投稿したい各Slackチャンネルで、以下のコマンドを使用してボットを招待します。

    ```
    /invite @<あなたのアプリ名>
    ```

これで `scat` を使用してSlackに投稿する準備ができました！